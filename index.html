<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Spare Part Stock Management</title>

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: Arial, sans-serif; background: #f5f7fa; color: #333; }

    /* Top Bar */
    .top-bar {
      width: 100%;
      padding: 12px 15px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: rgba(255,255,255,0.85);
      backdrop-filter: blur(10px);
      position: fixed;
      top: 0;
      left: 0;
      z-index: 1000;
      border-bottom: 1px solid rgba(0,0,0,0.1);
    }

    .logo {
      font-size: 1.2rem;
      font-weight: bold;
      white-space: nowrap;
    }

    .btn {
      padding: 10px 16px;
      background: #333;
      color: #fff;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-size: 0.9rem;
    }

    /* Layout Container */
    .container {
      padding: 90px 12px 40px;
      max-width: 1100px;
      margin: auto;
    }

    /* Glassmorphism Card */
    .glass-card {
      background: rgba(255,255,255,0.65);
      backdrop-filter: blur(8px);
      padding: 18px;
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.07);
    }

    /* Inputs */
    input {
      width: 100%;
      padding: 12px;
      border-radius: 10px;
      border: 1px solid #bbb;
      margin-top: 10px;
      font-size: 1rem;
    }

    /* Responsive Table Wrapper */
    .table-wrapper {
      overflow-x: auto;
      margin-top: 15px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.9rem;
      min-width: 700px;
    }

    th, td {
      padding: 10px;
      border-bottom: 1px solid #ddd;
      white-space: nowrap;
    }

    /* Popup Background */
    .popup-bg {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.4);
      display: none;
      justify-content: center;
      align-items: center;
    }

    /* Popup Window */
    .popup {
      width: 92%;
      max-width: 380px;
      background: rgba(255,255,255,0.85);
      backdrop-filter: blur(15px);
      padding: 20px;
      border-radius: 16px;
      box-shadow: 0 4px 25px rgba(0,0,0,0.15);
    }

    .btn-row {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }

    .cancel-btn {
      background: #777;
    }

    /* MOBILE STYLE */
    @media (max-width: 600px) {
      .logo { font-size: 1.05rem; }
      .btn { padding: 8px 14px; }
      .glass-card { padding: 15px; }
      table { font-size: 0.75rem; }
      th, td { padding: 8px; }
      input { font-size: 0.9rem; }
    }
  </style>
</head>

<body>

  <!-- TOP BAR -->
  <div class="top-bar">
    <div class="logo">Gangani Auto Electricals</div>
    <button class="btn" onclick="openPopup()">Add Item</button>
  </div>

  <!-- MAIN CONTENT -->
  <div class="container">
    <div class="glass-card">
      <h2>Search Stock</h2>

      <input type="text" id="searchInput" placeholder="Search part name or number..." onkeyup="filterStock()" />

      <div class="table-wrapper">
        <table>
          <thead>
            <tr>
              <th>Part Name</th>
              <th>Vehicle</th>
              <th>Part No.</th>
              <th>Stock</th>
              <th>Buy Price</th>
              <th>Sell Price</th>
              <th></th>
            </tr>
          </thead>
          <tbody id="stockTable"></tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- ADD ITEM POPUP -->
  <div class="popup-bg" id="popupBg">
    <div class="popup">
      <h3>Add New Part</h3>

      <input type="text" id="pname" placeholder="Part Name" />
      <input type="text" id="vehicle" placeholder="Vehicle" />
      <input type="text" id="partno" placeholder="Part Number" />
      <input type="number" id="stock" placeholder="Stock Amount" />
      <input type="number" id="buy" placeholder="Buy Price" />
      <input type="number" id="sell" placeholder="Sell Price" />

      <div class="btn-row">
        <button class="btn" onclick="addItem()">Add Item</button>
        <button class="btn cancel-btn" onclick="closePopup()">Cancel</button>
      </div>
    </div>
  </div>

<script>
  // Load database
  let stockData = JSON.parse(localStorage.getItem("stockData")) || [];
  displayStock(stockData);

  function saveDB() {
    localStorage.setItem("stockData", JSON.stringify(stockData));
  }

  function openPopup() {
    document.getElementById("popupBg").style.display = "flex";
  }
  function closePopup() {
    document.getElementById("popupBg").style.display = "none";
  }

  function addItem() {
    const item = {
      id: Date.now(),
      name: pname.value,
      vehicle: vehicle.value,
      partno: partno.value,
      stock: stock.value,
      buy: buy.value,
      sell: sell.value
    };

    stockData.push(item);
    saveDB();
    displayStock(stockData);
    closePopup();

    document.querySelectorAll(".popup input").forEach(i => i.value = "");
  }

  function deleteItem(id) {
    stockData = stockData.filter(item => item.id !== id);
    saveDB();
    displayStock(stockData);
  }

  function displayStock(data) {
    const table = document.getElementById("stockTable");
    table.innerHTML = "";

    data.forEach(item => {
      table.innerHTML += `
        <tr>
          <td>${item.name}</td>
          <td>${item.vehicle}</td>
          <td>${item.partno}</td>
          <td>${item.stock}</td>
          <td>${item.buy}</td>
          <td>${item.sell}</td>

          <td>
            <button onclick="deleteItem(${item.id})"
              style="background:none; border:none; cursor:pointer;">
              <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23dc3545'%3E%3Cpath d='M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-9l-1 1H5v2h14V4z'/%3E%3C/svg%3E"
                width="20" height="20" />
            </button>
          </td>
        </tr>
      `;
    });
  }

  function filterStock() {
    const text = searchInput.value.toLowerCase();
    const filtered = stockData.filter(i =>
      i.name.toLowerCase().includes(text) ||
      i.partno.toLowerCase().includes(text)
    );
    displayStock(filtered);
  }
</script>

</body>
</html>
